<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Me, Myself and AI</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap">
    <style>


        body {
            font-family: 'Roboto Mono', monospace;
            font-size: 16px;
            line-height: 1.6;
            color: #dfdede;
            margin: 0;
            padding: 0;
            background-color: #000000;
            display: flex;
            justify-content: flex-start;
            align-items: flex-start;
            min-height: 100vh;
        }

     

        h1{
            margin-top: 1em;
    font-size: 5em;
    color: #dfdede;
    display: flex;


        }
        h2{
            margin-right: 2em;
           
    font-size: 0.5em;
    color: #dfdede;
    display: flex;


        }

    
    
        p{
            
            margin-bottom: 3em;
            margin-top: -3em;
            font-size: 1em;
           
       

        }

        .container {
            width: 100%;
            max-width: 1000px;
           
            margin-right: 5em;
            gap: 5em;
            min-width: 100em;
            margin-left: 5em;
            /* padding: 20px; */
        }

        .gallery {
            display: flex;
            flex-direction: column;
            gap: 5em;
        }

        .category {
            display: flex;
            flex-wrap: nowrap; /* Rimuovi il wrap */
            gap: 0; /* Rimuovi il gap tra le immagini */
            overflow-x: auto; /* Permetti lo scrolling orizzontale se necessario */
        }

        .category-title {
            width: 100%;
            font-size: 1.5rem;
            font-weight: 700;
            color: #8E8D8D;
            margin-bottom: 0.5rem;
        }

        .gallery-item {
            position: relative;
            width: 150px; /* Larghezza fissa per gli elementi della galleria */
            height: 150px;
            overflow: hidden;
            cursor: pointer;
            background-repeat: no-repeat;
            background-size: cover;
        }

        .gallery-item img {
            width: 100%; /* Imposta la larghezza al 100% */
            height: 100%; /* Imposta l'altezza al 100% */
            object-fit: cover;
            transition: transform 0.5s ease;
        }

        .gallery-item:hover img {
            transform: scale(1.1);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
        }

        .modal-content {
            margin: 5% auto;
            display: block;
            width: 80%;
            max-width: 700px;
            height: auto;
        }

        .close {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #8E8D8D;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
        }

        .close:hover,
        .close:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        #cat {
            display: flex;

        }

        #cat .gallery-item { 
            height: 300px;
            width: 100px;

            background-color: red;
        }

        #dog {
            display: flex;

        }

        #dog .gallery-item { 
            height: 300px;
            width: 120px;

            background-color: red;
        }

        #cow {
            display: flex;

        }

        #cow .gallery-item { 
            height: 300px;
            width: 40px;

            background-color: red;
        }
    </style>
</head>
<header>



</header>


<body>
    
    <div class="container">
        <h1>Me, Myself and AI</h1>
        <p>exploration of the pattern in my image gallery</p>
        <div class="gallery" id="gallery">
            <div id="cat" class="category">
                <h2 class="category-title">Cat</h2>
            </div>
            <div id="dog" class="category">
                <h2 class="category-title">Dog</h2>
            </div>
            <div id="cow" class="category">
                <h2 class="category-title">Cow</h2>
            </div>
        </div>
    </div>

    <div id="myModal" class="modal">
        <span class="close">Ã—</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
    </div>

    <script>
        async function run() {
            let data;

            await fetch("./data_yolo.json")
                .then(r => r.json())
                .then(json => {
                    data = json;
                });

            data.sort((elementoA, elementoB) => {
                return elementoA.Orientation - elementoB.Orientation;
            });

            const categories = {
                cat: document.getElementById('cat'),
                dog: document.getElementById('dog'),
                cow: document.getElementById('cow')
            };

            const createGalleryItem = (imagePath, label) => {
                const galleryItem = document.createElement('div');
                galleryItem.classList.add('gallery-item');
                // galleryItem.style.position = 'relative'
                // galleryItem.style.right = '99px'

                // const image = document.createElement('img');
                // image.src = imagePath;
                // image.alt = `Image of a ${label}`;

                let url = "url('" + imagePath + "')";
                galleryItem.style.backgroundImage = url;
                galleryItem.style.backgroundPosition = 'center';

                // console.log(imagePath)

        
                galleryItem.onclick = function() {
                    const modal = document.getElementById('myModal');
                    const modalImg = document.getElementById('img01');
                    modal.style.display = "block";
                    modalImg.src = this.src;
                    document.getElementById('caption').innerHTML = this.alt;
                };

                // galleryItem.appendChild(image);
                return galleryItem;
            };

            for (const item of data) {
                // if (item.Objects && item.Objects.length > 0) {
                    //for (const obj of item.Objects) {
                    item.Objects.forEach( (obj, idx) => {
                        const imagePath = "./yolo_crop/" + item.FileName + "_" + idx + ".jpg";
                        const galleryItem = createGalleryItem(imagePath, obj.label);
                        if (categories[obj.label]) {
                            categories[obj.label].appendChild(galleryItem);
                        }
                    })
                // }         
            }

            const span = document.getElementsByClassName("close")[0];
            span.onclick = function() {
                document.getElementById('myModal').style.display = "none";
            }
        }

        window.addEventListener("load", run);
    </script>
</body>
</html>